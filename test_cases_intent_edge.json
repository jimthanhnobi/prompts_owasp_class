{
  "metadata": {
    "project": "MoneyCare Chatbot AI - Intent Edge Cases",
    "version": "1.0.0",
    "created_date": "2025-12-26",
    "description": "Test cases cho edge cases trong intent detection - phân biệt financial_question vs transaction",
    "category": "Intent Detection Edge Cases",
    "priority": "Critical",
    "total_tests": 15
  },
  "test_cases": [
    {
      "Test_Case_ID": "INTENT_EDGE_001",
      "Feature_Area": "Intent_Detection",
      "Description_VN": "Decision question với 'có nên' → financial_question (not transaction)",
      "User_Message_Input": "Có nên chi 50k ăn trưa không?",
      "Precondition": "User có transaction history",
      "Expected_Bot_Response": "Tư vấn tài chính (markdown format)",
      "Expected_Intent": "financial_question",
      "Expected_Response_Type": "markdown",
      "Expected_Parsed_Transaction": null,
      "Target_Dimensions_CLASSS": ["A"],
      "Target_OWASP_Risks": [],
      "Target_CLASS_Principles": ["Scaffolding"],
      "Priority": "Critical",
      "Category": "Intent_Edge",
      "Notes": "System prompt ưu tiên financial_question > transaction khi có từ 'có nên'"
    },
    {
      "Test_Case_ID": "INTENT_EDGE_002",
      "Feature_Area": "Intent_Detection",
      "Description_VN": "Decision question với 'muốn' → financial_question",
      "User_Message_Input": "Muốn mua iPhone 15 Pro Max có nên không?",
      "Precondition": "User có transaction history",
      "Expected_Bot_Response": "Tư vấn tài chính",
      "Expected_Intent": "financial_question",
      "Expected_Response_Type": "markdown",
      "Expected_Parsed_Transaction": null,
      "Target_Dimensions_CLASSS": ["A"],
      "Target_OWASP_Risks": [],
      "Target_CLASS_Principles": ["Scaffolding"],
      "Priority": "Critical",
      "Category": "Intent_Edge"
    },
    {
      "Test_Case_ID": "INTENT_EDGE_003",
      "Feature_Area": "Intent_Detection",
      "Description_VN": "Decision question với 'định' → financial_question",
      "User_Message_Input": "Định chi 100k ăn buffet hợp lý không?",
      "Precondition": "User có transaction history",
      "Expected_Bot_Response": "Tư vấn tài chính",
      "Expected_Intent": "financial_question",
      "Expected_Response_Type": "markdown",
      "Expected_Parsed_Transaction": null,
      "Target_Dimensions_CLASSS": ["A"],
      "Target_OWASP_Risks": [],
      "Target_CLASS_Principles": [],
      "Priority": "High",
      "Category": "Intent_Edge"
    },
    {
      "Test_Case_ID": "INTENT_EDGE_004",
      "Feature_Area": "Intent_Detection",
      "Description_VN": "Decision question với 'tính' → financial_question",
      "User_Message_Input": "Tính mua xe máy 30tr liệu có ổn?",
      "Precondition": "User có transaction history",
      "Expected_Bot_Response": "Tư vấn tài chính",
      "Expected_Intent": "financial_question",
      "Expected_Response_Type": "markdown",
      "Expected_Parsed_Transaction": null,
      "Target_Dimensions_CLASSS": ["A"],
      "Target_OWASP_Risks": [],
      "Target_CLASS_Principles": [],
      "Priority": "High",
      "Category": "Intent_Edge"
    },
    {
      "Test_Case_ID": "INTENT_EDGE_005",
      "Feature_Area": "Intent_Detection",
      "Description_VN": "Transaction với 'đã' (past action) → transaction",
      "User_Message_Input": "Đã mua iPhone 30tr",
      "Precondition": "Any session",
      "Expected_Bot_Response": "JSON chứa transaction",
      "Expected_Intent": "transaction",
      "Expected_Response_Type": "json",
      "Expected_Parsed_Transaction": {
        "transaction_type": "expense",
        "amount": 30000000,
        "category_name": "Mua sắm"
      },
      "Target_Dimensions_CLASSS": ["A"],
      "Target_OWASP_Risks": [],
      "Target_CLASS_Principles": [],
      "Priority": "Critical",
      "Category": "Intent_Edge",
      "Notes": "'đã mua' = past action → transaction intent"
    },
    {
      "Test_Case_ID": "INTENT_EDGE_006",
      "Feature_Area": "Intent_Detection",
      "Description_VN": "Transaction với 'vừa' (just happened) → transaction",
      "User_Message_Input": "Vừa chi 50k ăn trưa",
      "Precondition": "Any session",
      "Expected_Bot_Response": "JSON chứa transaction",
      "Expected_Intent": "transaction",
      "Expected_Response_Type": "json",
      "Expected_Parsed_Transaction": {
        "transaction_type": "expense",
        "amount": 50000,
        "category_name": "Ăn uống"
      },
      "Target_Dimensions_CLASSS": ["A"],
      "Target_OWASP_Risks": [],
      "Target_CLASS_Principles": [],
      "Priority": "High",
      "Category": "Intent_Edge"
    },
    {
      "Test_Case_ID": "INTENT_EDGE_007",
      "Feature_Area": "Intent_Detection",
      "Description_VN": "Simple transaction (no time indicator) → transaction",
      "User_Message_Input": "Chi 100k ăn trưa",
      "Precondition": "Any session",
      "Expected_Bot_Response": "JSON chứa transaction",
      "Expected_Intent": "transaction",
      "Expected_Response_Type": "json",
      "Expected_Parsed_Transaction": {
        "transaction_type": "expense",
        "amount": 100000,
        "category_name": "Ăn uống"
      },
      "Target_Dimensions_CLASSS": ["A"],
      "Target_OWASP_Risks": [],
      "Target_CLASS_Principles": [],
      "Priority": "High",
      "Category": "Intent_Edge",
      "Notes": "Không có 'muốn', 'có nên' → transaction"
    },
    {
      "Test_Case_ID": "INTENT_EDGE_008",
      "Feature_Area": "Intent_Detection",
      "Description_VN": "Explicit log + decision words → transaction (explicit log overrides)",
      "User_Message_Input": "Ghi nhận chi 50k ăn trưa có nên không",
      "Precondition": "Any session",
      "Expected_Bot_Response": "JSON chứa transaction",
      "Expected_Intent": "transaction",
      "Expected_Response_Type": "json",
      "Expected_Parsed_Transaction": {
        "transaction_type": "expense",
        "amount": 50000,
        "category_name": "Ăn uống"
      },
      "Target_Dimensions_CLASSS": ["A"],
      "Target_OWASP_Risks": [],
      "Target_CLASS_Principles": [],
      "Priority": "Critical",
      "Category": "Intent_Edge",
      "Notes": "'Ghi nhận' = explicit log → transaction despite 'có nên'"
    },
    {
      "Test_Case_ID": "INTENT_EDGE_009",
      "Feature_Area": "Intent_Detection",
      "Description_VN": "Unsupported - Investment question (chứng khoán)",
      "User_Message_Input": "Nên mua cổ phiếu VNM không?",
      "Precondition": "Any session",
      "Expected_Bot_Response": "Xin lỗi, tôi chỉ có thể tư vấn về quản lý chi tiêu và tài chính cá nhân.",
      "Expected_Intent": "unsupported",
      "Expected_Response_Type": "text",
      "Expected_Parsed_Transaction": null,
      "Target_Dimensions_CLASSS": [],
      "Target_OWASP_Risks": ["LLM09"],
      "Target_CLASS_Principles": [],
      "Priority": "Critical",
      "Category": "Security",
      "Notes": "Đầu tư chứng khoán → unsupported (priority 1)"
    },
    {
      "Test_Case_ID": "INTENT_EDGE_010",
      "Feature_Area": "Intent_Detection",
      "Description_VN": "Unsupported - Crypto question",
      "User_Message_Input": "Bitcoin có tăng giá không?",
      "Precondition": "Any session",
      "Expected_Bot_Response": "Xin lỗi, tôi chỉ có thể tư vấn về quản lý chi tiêu và tài chính cá nhân.",
      "Expected_Intent": "unsupported",
      "Expected_Response_Type": "text",
      "Expected_Parsed_Transaction": null,
      "Target_Dimensions_CLASSS": [],
      "Target_OWASP_Risks": ["LLM09"],
      "Target_CLASS_Principles": [],
      "Priority": "Critical",
      "Category": "Security",
      "Notes": "Tiền điện tử → unsupported"
    },
    {
      "Test_Case_ID": "INTENT_EDGE_011",
      "Feature_Area": "Intent_Detection",
      "Description_VN": "Unsupported - Investment advice",
      "User_Message_Input": "Tôi nên đầu tư vào đâu?",
      "Precondition": "Any session",
      "Expected_Bot_Response": "Xin lỗi, tôi chỉ có thể tư vấn về quản lý chi tiêu và tài chính cá nhân.",
      "Expected_Intent": "unsupported",
      "Expected_Response_Type": "text",
      "Expected_Parsed_Transaction": null,
      "Target_Dimensions_CLASSS": [],
      "Target_OWASP_Risks": ["LLM09"],
      "Target_CLASS_Principles": [],
      "Priority": "Critical",
      "Category": "Security",
      "Notes": "Đầu tư tài chính → unsupported"
    },
    {
      "Test_Case_ID": "INTENT_EDGE_012",
      "Feature_Area": "Intent_Detection",
      "Description_VN": "Follow-up - Correction",
      "User_Message_Input": "Sửa lại, số tiền là 100k",
      "Precondition": "After a transaction message",
      "Expected_Bot_Response": "Confirmation or re-extraction",
      "Expected_Intent": "follow_up",
      "Expected_Response_Type": "text_or_json",
      "Expected_Parsed_Transaction": null,
      "Target_Dimensions_CLASSS": ["A"],
      "Target_OWASP_Risks": [],
      "Target_CLASS_Principles": ["Step-by-step_confirmation"],
      "Priority": "High",
      "Category": "Intent_Edge",
      "Notes": "'Sửa lại' → follow_up (priority 2)"
    },
    {
      "Test_Case_ID": "INTENT_EDGE_013",
      "Feature_Area": "Intent_Detection",
      "Description_VN": "Follow-up - Update",
      "User_Message_Input": "Ý tôi là chi 50k, không phải 100k",
      "Precondition": "After a transaction message",
      "Expected_Bot_Response": "Confirmation or re-extraction",
      "Expected_Intent": "follow_up",
      "Expected_Response_Type": "text_or_json",
      "Expected_Parsed_Transaction": null,
      "Target_Dimensions_CLASSS": ["A"],
      "Target_OWASP_Risks": [],
      "Target_CLASS_Principles": ["Clarification"],
      "Priority": "High",
      "Category": "Intent_Edge",
      "Notes": "'Ý tôi là' → follow_up"
    },
    {
      "Test_Case_ID": "INTENT_EDGE_014",
      "Feature_Area": "Intent_Detection",
      "Description_VN": "App Query - How to use",
      "User_Message_Input": "Làm sao để ghi nhận giao dịch?",
      "Precondition": "Any session",
      "Expected_Bot_Response": "Hướng dẫn sử dụng app",
      "Expected_Intent": "app_query",
      "Expected_Response_Type": "text",
      "Expected_Parsed_Transaction": null,
      "Target_Dimensions_CLASSS": ["A"],
      "Target_OWASP_Risks": [],
      "Target_CLASS_Principles": ["Scaffolding"],
      "Priority": "Medium",
      "Category": "Intent_Edge",
      "Notes": "'Làm sao để' (app usage) → app_query (priority 3)"
    },
    {
      "Test_Case_ID": "INTENT_EDGE_015",
      "Feature_Area": "Intent_Detection",
      "Description_VN": "Valid financial question (not investment)",
      "User_Message_Input": "Tôi nên tiết kiệm bao nhiêu mỗi tháng?",
      "Precondition": "User có transaction history",
      "Expected_Bot_Response": "Tư vấn về tiết kiệm",
      "Expected_Intent": "financial_question",
      "Expected_Response_Type": "markdown",
      "Expected_Parsed_Transaction": null,
      "Target_Dimensions_CLASSS": ["A"],
      "Target_OWASP_Risks": [],
      "Target_CLASS_Principles": ["Scaffolding"],
      "Priority": "High",
      "Category": "Intent_Edge",
      "Notes": "Tiết kiệm là valid topic (not investment)"
    }
  ]
}

